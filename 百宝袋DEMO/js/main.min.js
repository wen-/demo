/*
* JS Document for baibaodai
* Developer: 黄文雄
* Email: yellowwen@126.com
* Date: 2017-10-30

var bbd_public={},errtips,timer,loading_img='<img src="/images/loading_small.gif" alt="" />';bbd_public.isIP=function(a){var b=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;return b.test(a)},bbd_public.minLength=function(a,b,c){var d=$.trim(a).length;return c&&(d=$.getStringLength(a)),d>=b},bbd_public.maxLength=function(a,b,c){var d=$.trim(a).length;return c&&(d=$.getStringLength(a)),d<=b},bbd_public.getStringLength=function(a,b){if(a=$.trim(a),"text"==b&&(a=a.replace(/<(?:img|embed).*?>/gi,"K").replace(/\r\n|\n|\r/g,"").replace(/<\/?[^>]*>/g,"")),""==a)return 0;for(var c=0,d=0;d<a.length;d++)a.charCodeAt(d)>255?c+=2:c++;return c},bbd_public.checkNumber=function(a){return""==$.trim(a)||!isNaN($.trim(a))},bbd_public.checkMobile=function(a){if(isNaN(a))return!1;var b=/^1[345678]\d{9}$/i;return b.test(a)},bbd_public.checkPhone=function(a){var b=/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$/i;return b.test(a)},bbd_public.checkEmail=function(a){var b=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;return b.test(a)},bbd_public.formatMoney=function(a,b){b=b>0&&b<=20?b:2,a=parseFloat((a+"").replace(/[^\d\.-]/g,"")).toFixed(b)+"";var c=a.split(".")[0].split("").reverse(),d=a.split(".")[1];for(t="",i=0;i<c.length;i++)t+=c[i]+((i+1)%3==0&&i+1!=c.length?",":"");var e=t.split("").reverse().join("")+"."+d;return e.replace("-,","-")},bbd_public.show_Template=function(a,b){var c=$(a).html();return $.each(b,function(a,b){var d=new RegExp("\\{%"+a+"%\\}","g");c=c.replace(d,b)}),c},bbd_public.countDown=function(a,b,c){timer&&clearInterval(timer),b.html(a+" s"),timer=setInterval(function(){a-=1,0===a?(clearInterval(timer),b.html(c).removeClass("disable")):b.html(a+" s")},1e3)},bbd_public.errTips=function(a){errtips&&clearTimeout(errtips),$("#errTips").html(a),errtips=window.setTimeout(function(){$("#errTips").html("")},2e3)},$(function(){function a(a,b,c,d){$.ajax({type:"POST",url:a,dataType:"json",data:b,success:function(a){"function"==typeof c&&c(a)},error:function(a){"function"==typeof d&&d(a)}})}$(".banner").height(.7*$(window).width()/1.77*1.1);new Swiper(".swiper-container",{slidesPerView:3,spaceBetween:5,lazy:{loadPrevNext:!0,loadPrevNextAmount:3},initialSlide:1,slidesPerView:"auto",centeredSlides:!0,pagination:{el:".swiper-pagination",clickable:!0}});$(window).resize(function(){$(".banner").height(.7*$(window).width()/1.77*1.1)}),$(".get_code").on("click",function(){var b=$(this),c=$.trim($("#phone").val());return!b.hasClass("disable")&&(c&&bbd_public.checkMobile(c)?(b.addClass("disable"),b.html("正在发送"),void a("/api/发送短信验证码",{"手机号":c},function(a){200==a.状态?bbd_public.countDown(60,b,"获取验证码"):(bbd_public.errTips(a.状态说明),b.removeClass("disable").html("获取验证码"))},function(a){bbd_public.errTips("获取失败 "+a.status),b.removeClass("disable").html("获取验证码")})):(bbd_public.errTips("请输入正确的手机号"),!1))}),$("#regBtn,#resetPassBtn").on("click",function(){var b=$(this),c=b[0].id,d=$.trim($("#phone").val()),e=$.trim($("#code").val()),f=$.trim($("#password").val());if(b.hasClass("disable"))return!1;if(!d||!bbd_public.checkMobile(d))return bbd_public.errTips("请输入正确的手机号"),!1;if(!e)return bbd_public.errTips($("#code").attr("placeholder")),!1;if(!f)return bbd_public.errTips($("#password").attr("placeholder")),!1;b.addClass("disable"),b.html("提交中"+loading_img);var g={"手机号":d,"验证码":e,"密码":f};"regBtn"==c?a("/api/注册",g,function(a){200==a.状态?window.location.href="":(bbd_public.errTips(a.状态说明),b.removeClass("disable").html("注册"))},function(a){bbd_public.errTips("提交失败 "+a.status),b.removeClass("disable").html("注册")}):a("/api/重置密码",g,function(a){200==a.状态?(b.html("重置成功"),setTimeout(function(){window.location.href=""},1500)):(bbd_public.errTips(a.状态说明),b.removeClass("disable").html("重置密码"))},function(a){bbd_public.errTips("重置失败 "+a.status),b.removeClass("disable").html("重置密码")})}),$(".login_tab h2").on("click",function(){var a=$(this),b=a.index();$(this).addClass("current").siblings("h2").removeClass("current"),1==b?($(".login_code").hide(),$(".login_pass").show()):($(".login_code").show(),$(".login_pass").hide())}),$("#loginBtn").on("click",function(){var b=$(this),c=$.trim($("#phone").val()),d=$.trim($("#code").val()),e=$.trim($("#password").val()),f=$(".login_tab h2.current").index();if(b.hasClass("disable"))return!1;if(!c||!bbd_public.checkMobile(c))return bbd_public.errTips("请输入正确的手机号"),!1;if(1==f){if(!e)return bbd_public.errTips($("#password").attr("placeholder")),!1}else if(!d)return bbd_public.errTips($("#code").attr("placeholder")),!1;b.addClass("disable"),b.html("登录中"+loading_img);var g={"手机号":c};1==f?g.密码=e:g.验证码=d,a("/api/登录",g,function(a){200==a.状态?window.location.href="":(bbd_public.errTips(a.状态说明),b.removeClass("disable").html("登录"))},function(a){bbd_public.errTips("提交失败 "+a.status),b.removeClass("disable").html("登录")})}),$(".sort_list").on("click",function(){var b=$(this),c="上班族",d=b.index();"0"==d?c="上班族":"1"==d?c="企业主":"2"==d&&(c="其他");var e={"类型":c,"页码":1};a("/api/贷款列表",e,function(a){200==a.状态||console.log(a.状态说明)},function(a){console.log(a.status)})})});